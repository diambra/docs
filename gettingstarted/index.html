<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.112.3"><meta name=description content="Official documentation for DIAMBRA, the platform where coders create AI agents to compete in video games tournaments."><meta name=author content="DIAMBRA Team"><meta name=keywords content="Documentation,Reinforcement Learning,Deep Reinforcement Learning,AI Tournaments,Video Games Environments,RL Environments,DIAMBRA,DIAMBRA Documentation,AI Competitions,Artificial Intelligence"><meta itemprop=name content="DIAMBRA Docs"><meta itemprop=description content="Official documentation for DIAMBRA, the platform where coders create AI agents to compete in video games tournaments."><meta itemprop=image content="https://docs.diambra.ai/images/logoMeta.png"><meta property="og:site_name" content="DIAMBRA Docs"><meta property="og:title" content="DIAMBRA Docs"><meta property="og:description" content="Official documentation for DIAMBRA, the platform where coders create AI agents to compete in video games tournaments."><meta property="og:image" content="https://docs.diambra.ai/images/logoMeta.png"><meta property="og:url" content="https://docs.diambra.ai"><meta property="og:type" content="website"><meta name=publish_date property="og:publish_date" content="2022-01-15T00:00:00-0600"><meta charset=utf-8><link rel=icon href=/images/favicon.png type=image/png><title>Getting Started :: DIAMBRA Docs</title><link href=/css/nucleus.css?1691500249 rel=stylesheet><link href=/css/fontawesome-all.min.css?1691500249 rel=stylesheet><link href=/css/hybrid.css?1691500249 rel=stylesheet><link href=/css/featherlight.min.css?1691500249 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1691500249 rel=stylesheet><link href=/css/auto-complete.css?1691500249 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1691500249 rel=stylesheet><link href=/css/theme.css?1691500249 rel=stylesheet><link href=/css/tabs.css?1691500249 rel=stylesheet><link href=/css/hugo-theme.css?1691500249 rel=stylesheet><link href=/css/theme-diambra.css?1691500249 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1691500249></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><style type=text/css>pre code{white-space:pre}</style></head><body data-url=/gettingstarted/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=https://docs.diambra.ai><img src=https://docs.diambra.ai/images/logo.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1691500249></script>
<script type=text/javascript src=/js/auto-complete.js?1691500249></script>
<script type=text/javascript>var baseurl="https://docs.diambra.ai"</script><script type=text/javascript src=/js/search.js?1691500249></script></div><section id=homelinks><ul><li><a class=padding href=https://docs.diambra.ai><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/gettingstarted/ title="Getting Started" class="dd-item
active"><a href=/gettingstarted/>Getting Started
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/gettingstarted/examples/ title=Examples class=dd-item><a href=/gettingstarted/examples/>Examples
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/gettingstarted/examples/singleplayerenv/ title="Single Player Environment" class=dd-item><a href=/gettingstarted/examples/singleplayerenv/>Single Player Environment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/gettingstarted/examples/multiplayerenv/ title="Multi Player Environment" class=dd-item><a href=/gettingstarted/examples/multiplayerenv/>Multi Player Environment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/gettingstarted/examples/wrappersoptions/ title="Wrappers Options" class=dd-item><a href=/gettingstarted/examples/wrappersoptions/>Wrappers Options
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/gettingstarted/examples/humanexperiencerecorder/ title="Human Experience Recorder" class=dd-item><a href=/gettingstarted/examples/humanexperiencerecorder/>Human Experience Recorder
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/gettingstarted/examples/imitationlearning/ title="Imitation Learning" class=dd-item><a href=/gettingstarted/examples/imitationlearning/>Imitation Learning
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/envs/ title=Environments class=dd-item><a href=/envs/>Environments
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/envs/games/ title="Games & Specifics" class=dd-item><a href=/envs/games/>Games & Specifics
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/envs/games/doapp/ title="Dead Or Alive ++" class=dd-item><a href=/envs/games/doapp/>Dead Or Alive ++
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/envs/games/sfiii3n/ title="Street Fighter III 3rd Strike" class=dd-item><a href=/envs/games/sfiii3n/>Street Fighter III 3rd Strike
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/envs/games/tektagt/ title="Tekken Tag Tournament" class=dd-item><a href=/envs/games/tektagt/>Tekken Tag Tournament
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/envs/games/umk3/ title="Ultimate Mortal Kombat 3" class=dd-item><a href=/envs/games/umk3/>Ultimate Mortal Kombat 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/envs/games/samsh5sp/ title="Samurai Showdown 5 Special" class=dd-item><a href=/envs/games/samsh5sp/>Samurai Showdown 5 Special
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/envs/games/kof98umh/ title="The King of Fighers '98 UMH" class=dd-item><a href=/envs/games/kof98umh/>The King of Fighers '98 UMH
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/wrappers/ title=Wrappers class=dd-item><a href=/wrappers/>Wrappers
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/utils/ title=Utils class=dd-item><a href=/utils/>Utils
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/imitationlearning/ title="Imitation Learning" class=dd-item><a href=/imitationlearning/>Imitation Learning
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/handsonreinforcementlearning/ title="Hands-on Reinforcement Learning" class=dd-item><a href=/handsonreinforcementlearning/>Hands-on Reinforcement Learning
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/handsonreinforcementlearning/stablebaselines3/ title="Stable Baselines 3" class=dd-item><a href=/handsonreinforcementlearning/stablebaselines3/>Stable Baselines 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/handsonreinforcementlearning/rayrllib/ title="Ray RLlib" class=dd-item><a href=/handsonreinforcementlearning/rayrllib/>Ray RLlib
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/competitionplatform/ title="Competition Platform" class=dd-item><a href=/competitionplatform/>Competition Platform
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/competitionplatform/basicagentscript/ title="Basic Agent Script" class=dd-item><a href=/competitionplatform/basicagentscript/>Basic Agent Script
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/competitionplatform/submissionevaluation/ title="Submission Evaluation" class=dd-item><a href=/competitionplatform/submissionevaluation/>Submission Evaluation
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/competitionplatform/howtosubmitanagent/ title="How To Submit An Agent" class=dd-item><a href=/competitionplatform/howtosubmitanagent/>How To Submit An Agent
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/competitionplatform/howtosubmitanagent/submitprebuiltagents/ title="Submit Pre-Built Agents" class=dd-item><a href=/competitionplatform/howtosubmitanagent/submitprebuiltagents/>Submit Pre-Built Agents
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/competitionplatform/howtosubmitanagent/submityourownagent/ title="Submit Your Own Agent" class=dd-item><a href=/competitionplatform/howtosubmitanagent/submityourownagent/>Submit Your Own Agent
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/competitionplatform/howtosubmitanagent/customdependenciesimage/ title="Custom Dependencies Image" class=dd-item><a href=/competitionplatform/howtosubmitanagent/customdependenciesimage/>Custom Dependencies Image
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/competitionplatform/argumentsandcommands/ title="Arguments and Commands" class=dd-item><a href=/competitionplatform/argumentsandcommands/>Arguments and Commands
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/competitionplatform/testyouragentlocally/ title="Test Your Agent Locally" class=dd-item><a href=/competitionplatform/testyouragentlocally/>Test Your Agent Locally
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/projects/ title=Projects class=dd-item><a href=/projects/>Projects
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/projects/rlztournament/ title="RLZ Tournament" class=dd-item><a href=/projects/rlztournament/>RLZ Tournament
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/projects/gamepainter/ title="Game Painter" class=dd-item><a href=/projects/gamepainter/>Game Painter
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://diambra.ai target=_blank><i class='fas fa-globe'></i> Website</a></li><li><a class=padding href=https://github.com/diambra/ target=_blank><i class='fab fa-fw fa-github'></i> GitHub</a></li><li><a class=padding href=https://diambra.ai/discord target=_blank><i class='fab fa-discord'></i> Discord</a></li><li><a class=padding href=https://www.twitch.tv/diambra_ai target=_blank><i class='fab fa-twitch'></i> Twitch</a></li><li><a class=padding href=https://www.linkedin.com/company/diambra target=_blank><i class='fab fa-linkedin'></i> Linkedin</a></li><li><a class=padding href=https://www.youtube.com/c/diambra_ai target=_blank><i class='fab fa-youtube'></i> YouTube</a></li><li><a class=padding href=https://twitter.com/diambra_ai target=_blank><i class='fab fa-fw fa-twitter'></i> Twitter</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><center><a class=github-button href=https://github.com/diambra/arena/archive/refs/heads/main.zip data-icon=octicon-download aria-label="Download DIAMBRA Arena from GitHub">Download</a>
<a class=github-button href=https://github.com/diambra/arena data-icon=octicon-star data-show-count=true aria-label="Star DIAMBRA Arena on GitHub">Star</a>
<a class=github-button href=https://github.com/diambra/arena/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork DIAMBRA Arena on GitHub">Fork</a></center>
<script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Home</a> > Getting Started</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#index>Index</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#running-the-environment>Running the Environment</a></li><li><a href=#advanced-usage>Advanced Usage</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Getting Started</h1><h3 id=index>Index</h3><div style=font-size:1.125rem><ul><li><a href=./#prerequisites>Prerequisites</a></li><li><a href=./#running-the-environment>Running the Environment</a><ul><li><a href=./#basic-script>Basic Script</a></li><li><a href=./#diambra-command-line-interface-cli>DIAMBRA Command Line Interface (CLI)</a></li><li><a href=./#script-execution>Script Execution</a></li></ul></li><li><a href=./#advanced-usage>Advanced Usage</a><ul><li><a href=./#diambra-cli-advanced-options>DIAMBRA CLI Advanced Options</a></li><li><a href=./#using-python-notebooks>Using Python Notebooks</a></li><li><a href=./#environment-native-rendering>Environment Native Rendering</a></li><li><a href=./#running-multiple-environments-in-parallel>Running Multiple Environments in Parallel</a></li><li><a href=./#run-diambra-engine-without-cli>Run DIAMBRA Engine without CLI</a></li></ul></li></ul></div><h3 id=prerequisites>Prerequisites</h3><ul><li>Installation completed and tested as described in <a href=/#installation>Installation</a> and <a href=/#quickstart>Quickstart</a> homepage sections</li><li>ROMs downloaded and placed all in the same folder, whose absolute path will be referred in the following as <code>/absolute/path/to/roms/folder/</code></li></ul><div class="notices tip"><p>To avoid specifying ROMs path at every run, you can define the environment variable <code>DIAMBRAROMSPATH=/absolute/path/to/roms/folder/</code>, either temporarily in your current shell/prompt session, or permanently in your profile (e.g. on linux in <code>~/.bashrc</code>).</p></div><h3 id=running-the-environment>Running the Environment</h3><h5 id=basic-script>Basic Script</h5><p>The most straightforward and simple script to use DIAMBRA Arena is reported below. It features a random agent playing Dead Or Alive ++, and it represents the general interaction schema to be used for every game and context of DIAMBRA Arena.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> diambra.arena
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    env <span style=color:#f92672>=</span> diambra<span style=color:#f92672>.</span>arena<span style=color:#f92672>.</span>make(<span style=color:#e6db74>&#34;doapp&#34;</span>)
</span></span><span style=display:flex><span>    observation <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>reset()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>        env<span style=color:#f92672>.</span>render()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        actions <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>action_space<span style=color:#f92672>.</span>sample()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        observation, reward, done, info <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>step(actions)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> done:
</span></span><span style=display:flex><span>            observation <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>reset()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    env<span style=color:#f92672>.</span>close()
</span></span></code></pre></div><div class="notices note"><p>More complex and complete examples can be found in the <a href=./examples/>Examples</a> section.</p></div><h5 id=diambra-command-line-interface-cli>DIAMBRA Command Line Interface (CLI)</h5><p>DIAMBRA Arena comes with a very handy tool: the DIAMBRA Command Line Interface (DIAMBRA CLI). It provides different useful commands, with related options, that contribute to make running DIAMBRA Arena environments super easy.</p><p>The main use of the CLI is running a command after brining up DIAMBRA Arena containerized environment(s). It sets the <code>DIAMBRA_ENVS</code> environment variable to list the endpoints of all running environments.</p><p>Usage:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>diambra run <span style=color:#f92672>[</span>flags<span style=color:#f92672>]</span> &lt;command-to-execute&gt;
</span></span></code></pre></div><p>The only flag needed for simple executions is listed below. Advanced usage and options can be found in the <a href=./#diambra-cli-advanced-options>CLI Advanced Options</a> section below.</p><table><thead><tr><th><strong><span style=color:#5b5b60>Flag</span></strong></th><th><strong><span style=color:#5b5b60>Type</span></strong></th><th><strong><span style=color:#5b5b60>Description</span></strong></th></tr></thead><tbody><tr><td><code>-r, --path.roms</code></td><td><code>str</code></td><td>Path to ROMs (default to DIAMBRAROMSPATH env var if set)</td></tr></tbody></table><h5 id=script-execution>Script Execution</h5><p>To run a python script using the CLI, one can just execute the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>diambra run -r /absolute/path/to/roms/folder/ python diambra_arena_gist.py
</span></span></code></pre></div><p>This will start a new container with the environment, load in the <code>DIAMBRA_ENVS</code> environment variable the port on which the environment accepts connections, and run the script where the DIAMBRA Arena python module is imported and used to instantiate a new environment, that will automatically retrieve the port and connect to it.</p><h3 id=advanced-usage>Advanced Usage</h3><div class="notices note"><p>In what follows, we will omit the <code>-r</code> flag for the CLI, assuming the user has set the <code>DIAMBRAROMSPATH</code> environment variable in his system.</p></div><h5 id=diambra-cli-advanced-options>DIAMBRA CLI Advanced Options</h5><h6 id=run-command>Run Command</h6><p>Usage:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>diambra run <span style=color:#f92672>[</span>flags<span style=color:#f92672>]</span> &lt;command-to-execute&gt;
</span></span></code></pre></div><p>It runs a command after brining up DIAMBRA Arena containerized environment(s). It sets the <code>DIAMBRA_ENVS</code> environment variable to list the endpoints of all running environments.</p><p>The next snippet shows the help message for this command, where all available options are reported:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Version: 0.0.14
</span></span><span style=display:flex><span>Usage:
</span></span><span style=display:flex><span>  diambra run <span style=color:#f92672>[</span>flags<span style=color:#f92672>]</span> command <span style=color:#f92672>[</span>args...<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Flags:
</span></span><span style=display:flex><span>  -a, --agent.image string        Run given agent command in container
</span></span><span style=display:flex><span>  -l, --engine.lockfps            Lock FPS
</span></span><span style=display:flex><span>  -g, --engine.render             Render graphics server side
</span></span><span style=display:flex><span>      --engine.sound              Enable sound
</span></span><span style=display:flex><span>  -x, --env.autoremove            Remove containers on exit <span style=color:#f92672>(</span>default true<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      --env.containerip           Use &lt;containerIP&gt;:&lt;containerPort&gt; instead of &lt;env.host/localhost&gt;:&lt;hostPort&gt;
</span></span><span style=display:flex><span>      --env.host string           Host to bind ports on <span style=color:#f92672>(</span>default <span style=color:#e6db74>&#34;127.0.0.1&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      --env.image string          Env image to use, omit to detect from diambra-arena version
</span></span><span style=display:flex><span>      --env.mount strings         Host mounts <span style=color:#66d9ef>for</span> env container <span style=color:#f92672>(</span>/host/path:/container/path<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      --env.preallocateport       Preallocate port <span style=color:#66d9ef>for</span> env container. Workaround <span style=color:#66d9ef>for</span> port conflicts on Windows
</span></span><span style=display:flex><span>  -s, --env.scale int             Number of environments to run <span style=color:#f92672>(</span>default 1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      --env.seccomp string        Path to seccomp profile to use <span style=color:#66d9ef>for</span> env <span style=color:#f92672>(</span>may slow down environment<span style=color:#f92672>)</span>. Set to <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#66d9ef>for</span> runtime<span style=color:#960050;background-color:#1e0010>&#39;</span>s default profile. <span style=color:#f92672>(</span>default <span style=color:#e6db74>&#34;unconfined&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  -h, --help                      help <span style=color:#66d9ef>for</span> run
</span></span><span style=display:flex><span>  -n, --images.no-pull            Do not try to pull image before running
</span></span><span style=display:flex><span>      --init.image string         Init image to use <span style=color:#f92672>(</span>default <span style=color:#e6db74>&#34;ghcr.io/diambra/init:main&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  -i, --interactive               Open stdin <span style=color:#66d9ef>for</span> interactions with arena and agent <span style=color:#f92672>(</span>default true<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      --path.credentials string   Path to credentials file <span style=color:#f92672>(</span>default <span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.diambra/credentials&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  -r, --path.roms string          Path to ROMs <span style=color:#f92672>(</span>default to DIAMBRAROMSPATH env var <span style=color:#66d9ef>if</span> set<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Global Flags:
</span></span><span style=display:flex><span>  -d, --log.debug           Enable debug logging
</span></span><span style=display:flex><span>      --log.format string   Set logging output format <span style=color:#f92672>(</span>logfmt, json, fancy<span style=color:#f92672>)</span> <span style=color:#f92672>(</span>default <span style=color:#e6db74>&#34;fancy&#34;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><div class="notices note"><p>Currently, the <code>-g, --engine.render</code> option to render graphics server side, is only available for Linux systems. For additional info and for Windows/MacOS alternatives, see <a href=./#environment-native-rendering>Environment Native Rendering</a> section below.</p></div><h6 id=arena-command>Arena Command</h6><p>Usage:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>diambra arena <span style=color:#f92672>[</span>flags<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>command<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>It brings up DIAMBRA Arena containerized environment(s) and returns to the terminal output the endpoints of all running environments.</p><p>The snippet below lists all available commands for this mode.</p><p>Flags reported for the Run command above apply also to this mode.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Version: 0.0.14
</span></span><span style=display:flex><span>Usage:
</span></span><span style=display:flex><span>  diambra arena <span style=color:#f92672>[</span>command<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Available Commands:
</span></span><span style=display:flex><span>  check-roms  check roms
</span></span><span style=display:flex><span>  down        Stop DIAMBRA Arena
</span></span><span style=display:flex><span>  list-roms   list roms
</span></span><span style=display:flex><span>  status      Show status of DIAMBRA arena
</span></span><span style=display:flex><span>  up          Start DIAMBRA arena
</span></span><span style=display:flex><span>  version     version
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Flags:
</span></span><span style=display:flex><span>  -h, --help   help <span style=color:#66d9ef>for</span> arena
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Global Flags:
</span></span><span style=display:flex><span>  -d, --log.debug           Enable debug logging
</span></span><span style=display:flex><span>      --log.format string   Set logging output format <span style=color:#f92672>(</span>logfmt, json, fancy<span style=color:#f92672>)</span> <span style=color:#f92672>(</span>default <span style=color:#e6db74>&#34;fancy&#34;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><h5 id=using-python-notebooks>Using Python Notebooks</h5><p>DIAMBRA Arena can also be used inside python notebooks. There are two options to do it, explained here after.</p><p>The most straightfoward one is to launch Jupyter Notebook through the CLI as shown by the next command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>diambra run jupyter notebook
</span></span></code></pre></div><p>This step is needed to boot up the environment container and load its connection port in the <code>DIAMBRA_ENVS</code> environment variable. This variable is thus accessible from within Jupyter Notebook, that looks like the following one:</p><h5><a href=/pybooks/diambraarenagist.html>View in full screen</a></h5><iframe src=/pybooks/diambraarenagist.html style=height:700px;width:100%;border:none;overflow:hidden scrolling=no></iframe><p>If one wants to execute a notebook from somewhere else (for example from inside Visual Studio Code), it is not possible to leverage the <code>DIAMBRA_ENVS</code> environment variable for passing the connection port information. In such cases, one should activate the environment container and retrieve its port, and this can be done by means of the CLI command <code>diambra arena up</code> that returns the port address, as shown below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>diambra arena up
</span></span><span style=display:flex><span>Server listening on 0.0.0.0:50051
</span></span><span style=display:flex><span>127.0.0.1:49153
</span></span></code></pre></div><p>This information is then passed to the make function of DIAMBRA Arena through the setting <code>"env_address"</code> as shown in the next jupyter notebook:</p><h5><a href=/pybooks/diambraarenagist2.html>View in full screen</a></h5><iframe src=/pybooks/diambraarenagist2.html style=height:700px;width:100%;border:none;overflow:hidden scrolling=no></iframe><p>Once done, one can stop running container(s) as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>diambra arena down
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>bb1a<span style=color:#f92672>)</span> stopping container
</span></span></code></pre></div><h5 id=environment-native-rendering>Environment Native Rendering</h5><p>It is possible to activate emulator native rendering while running environments (i.e. bringing up the emulator graphics window). The CLI provides a specific flag for this purpose, but currently this is supported only on Linux, while Windows and MacOS users have to configure a Xserver and link it to the environment container. The next tabs provide hints for each context.</p><div class=tab-panel><div class=tab-nav><button data-tab-item=Linux data-tab-group=nativeRendering class="tab-nav-button btn active" onclick='switchTab("nativeRendering","Linux")'>Linux</button>
<button data-tab-item=Win data-tab-group=nativeRendering class="tab-nav-button btn" onclick='switchTab("nativeRendering","Win")'>Win</button>
<button data-tab-item=MacOS data-tab-group=nativeRendering class="tab-nav-button btn" onclick='switchTab("nativeRendering","MacOS")'>MacOS</button></div><div class=tab-content><div data-tab-item=Linux data-tab-group=nativeRendering class="tab-item active"><p>On Linux, the CLI allows to render emulator natively on the host, the user only needs to add the <code>-g</code> flag to the run command, as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>diambra run -g python diambra_arena_gist.py
</span></span></code></pre></div><div class="notices note"><p>Activating emulator native rendering will open a GUI where the game executes. Currently, this feature is affected by a problem: the mouse cursor disappears and remains constrained inside such window. To re-aquire control of the OS Xserver, one can circle through the active windows using the key combination ALT+TAB and highlight a different one.</p></div></div><div data-tab-item=Win data-tab-group=nativeRendering class=tab-item><p>To run environments with native emulator GUI support on Windows, currently requires the user to setup a virtual XServer and connect it to the container. We cannot provide support for this use case at the moment, but we plan to implement this feature in the near future.</p><p>A virtual XServer that in our experience proved to be effective is <a href=https://sourceforge.net/projects/vcxsrv/ target=_blank>VcXsrv Windows X Server</a>.</p></div><div data-tab-item=MacOS data-tab-group=nativeRendering class=tab-item><p>To run environments with native emulator GUI support on MacOS, currently requires the user to setup a virtual XServer and connect it to the container. We cannot provide support for this use case at the moment, but we plan to implement this feature in the near future.</p><p>A virtual XServer that in our experience proved to be effective is <a href=https://www.xquartz.org/releases/XQuartz-2.7.8.html target=_blank>XQuartz 2.7.8</a> coupled to <code>socat</code> that can be installed via <code>brew install socat</code>.</p></div></div></div><h5 id=running-multiple-environments-in-parallel>Running Multiple Environments in Parallel</h5><p>It can be useful to run multiple environment instances in parallel, for example for Deep RL training. The CLI provides a flag to control this, it can be used both by the <code>run</code> and the <code>arena</code> commands. The former will load a string in the <code>DIAMBRA_ENVS</code> environment variable where connection addresses are listed and separated by a space, while the latter will print out in the terminal the same string. These values can then be used properly to setup multiple parallel connections.</p><p>Running a script after having started 16 containers:</p><pre tabindex=0><code>diambra run -s=16 python training_script.py
</code></pre><p>Starting 4 containers and printing their addresses in the terminal:</p><pre tabindex=0><code>diambra arena -s=4 up
Server listening on 0.0.0.0:50051
127.0.0.1:49154 127.0.0.1:49155 127.0.0.1:49156 127.0.0.1:49157
</code></pre><h5 id=run-diambra-engine-without-cli>Run DIAMBRA Engine without CLI</h5><p>Agents connect via network using gRPC to DIAMBRA Engine running in a Docker container. The <code>diambra</code> CLI&rsquo;s <code>run</code> command starts the DIAMBRA Engine in a Docker container and sets up the environment to make it easy to connect to the Engine. For troubleshooting it might be useful to run the Engine manually, using host networking.</p><div class="notices note"><p>Creating the <code>~/.diambra</code> and <code>~/.diambra/credentials</code> is only needed when you never ran the diambra CLI before. Otherwise this step can be skipped.</p></div><h6 id=start-engine>Start Engine</h6><div class=tab-panel><div class=tab-nav><button data-tab-item=Linux/MacOS data-tab-group=manualEngineDocker class="tab-nav-button btn active" onclick='switchTab("manualEngineDocker","Linux/MacOS")'>Linux/MacOS</button>
<button data-tab-item="Win (cmd)" data-tab-group=manualEngineDocker class="tab-nav-button btn" onclick='switchTab("manualEngineDocker","Win (cmd)")'>Win (cmd)</button>
<button data-tab-item="Win (PowerShell)" data-tab-group=manualEngineDocker class="tab-nav-button btn" onclick='switchTab("manualEngineDocker","Win (PowerShell)")'>Win (PowerShell)</button></div><div class=tab-content><div data-tab-item=Linux/MacOS data-tab-group=manualEngineDocker class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir ~/.diambra
</span></span><span style=display:flex><span>touch ~/.diambra/credentials
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker run -d --rm --name engine <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v $HOME/.diambra/credentials:/tmp/.diambra/credentials <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v /absolute/path/to/roms/folder/:/opt/diambraArena/roms <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --net<span style=color:#f92672>=</span>host docker.io/diambra/engine:latest
</span></span></code></pre></div></div><div data-tab-item="Win (cmd)" data-tab-group=manualEngineDocker class=tab-item><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmd data-lang=cmd><span style=display:flex><span><span style=color:#66d9ef>mkdir</span> %userprofile%/.diambra
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> &gt; %userprofile%/.diambra/credentials
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker run --rm -ti --name engine <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff> </span> -v %userprofile%/.diambra/credentials:/tmp/.diambra/credentials <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff> </span> -v %userprofile%/.diambra/roms:/opt/diambraArena/roms <span style=color:#ae81ff>^
</span></span></span><span style=display:flex><span><span style=color:#ae81ff> </span> --net=host docker.io/diambra/engine:latest
</span></span></code></pre></div></div><div data-tab-item="Win (PowerShell)" data-tab-group=manualEngineDocker class=tab-item><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>mkdir $Env:userprofile/.diambra
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;&#34;</span> &gt; $Env:userprofile/.diambra/credentials
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker run --rm -ti --name engine `
</span></span><span style=display:flex><span>  -v $Env:userprofile/.diambra/credentials<span style=color:#960050;background-color:#1e0010>:</span>/tmp/.diambra/credentials `
</span></span><span style=display:flex><span>  -v $Env:userprofile/.diambra/roms<span style=color:#960050;background-color:#1e0010>:</span>/opt/diambraArena/roms `
</span></span><span style=display:flex><span>  --net=host docker.io/diambra/engine<span style=color:#960050;background-color:#1e0010>:</span>latest
</span></span></code></pre></div></div></div></div><h6 id=connect-to-engine>Connect to Engine</h6><p>Now you can run the script that uses DIAMBRA Arena by opening a new terminal and setting <code>DIAMBRA_ENVS</code> environment variable followed by the python command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>DIAMBRA_ENVS<span style=color:#f92672>=</span>localhost:50051 python ./script.py
</span></span></code></pre></div><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1691500249></script>
<script src=/js/perfect-scrollbar.min.js?1691500249></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1691500249></script>
<script src=/js/jquery.sticky.js?1691500249></script>
<script src=/js/featherlight.min.js?1691500249></script>
<script src=/js/highlight.pack.js?1691500249></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1691500249></script>
<script src=/js/learn.js?1691500249></script>
<script src=/js/hugo-learn.js?1691500249></script>
<script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-105947713-1","auto"),ga("send","pageview")</script></body></html>